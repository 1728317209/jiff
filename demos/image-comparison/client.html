<html>
<head>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" integrity="sha384-Zug+QiDoJOrZ5t4lssLdxGhVrurbmBWopoEl+M6BdEfwnCJZtKxi1KgxUyJq13dy" crossorigin="anonymous">
  
  <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/js/bootstrap.min.js" integrity="sha384-a5N7Y/aK3qNeh15eJKGWxsqtnX/wWdSZSKp+81YjTmS15nvnvxKHuzaWwXHDli+4" crossorigin="anonymous"></script>

  <!-- JIFF related files -->  
  <script src="/socket.io/socket.io.js"></script>
  <script src="/lib/sodium.js"></script>
  <script src="/lib/jiff-client.js"></script>
  
  <!-- Non-MPC related javascript -->
  <script type="text/javascript">
    // Hashes the data of the image.
    function hashImage(imgData) {
      var hash = 0, i, chr;
      if (imgData.length === 0) return hash;
      for (i = 0; i < imgData.length; i++) {
        chr   = imgData.charCodeAt(i);
        hash  = ((hash << 5) - hash) + chr;
        hash |= 0; // Convert to 32bit integer
      }
      return hash;
    };

  

    // Called when the MPC comparison is finished to display the result of the computation to the user
    function displayResult(result) { // result is a boolean
      var h = document.createElement('h6');
      var t;
      if (result) {
        t = document.createTextNode('Pictures are the same');
      } else {
        t = document.createTextNode('Pictures are different');      
      }
      h.appendChild(t);
      var resultDiv = document.getElementById('result');
      resultDiv.appendChild(h);
      $("#compareBtn").attr("disabled", false);
    }
  </script>
 

  <style>
    body {
        padding: 50px;
    }

    canvas {
        display: none;
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="row">
        <h1>Image Comparison</h1>        
    </div>
    <div class="row">
        <input class="form-control-file" type='file' id='fileUpload'>        
    </div>
    <br/><br/>
    <div id="btns" class="row">
      <button class="btn btn-secondary" id="connectBtn" onclick="connect();">connect</button>
      <button class="btn btn-secondary" id="compareBtn" disabled="disabled" onclick="process();">compare</button>
    </div>
    <br/>
    <div class="row">
        <h4>Result</h4>
    </div>
    <div id="result"></div>
    <canvas id="canvas" style="border:1px solid #d3d3d3;background:#ffffff;">
        Your browser does not support the HTML5 canvas tag.</canvas>
  </div>
</body>
</html>
