<!doctype html>
<html>
  <head>
    <title>Share two numbers</title>
    <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.2/socket.io.js"></script>
    <script src="jiff.js"></script>
  </head>
  <body>
    <ul id="received_shares"></ul>
    
    <script>
    // Setup
    var jiff_instance = null;
    $(function() {
        jiff_instance = jiff("http://localhost", 3000, 3);
    });
    
    function toString(map) {
        shares = "";
        for(var i = 1; i <= 3; i++) {
            shares = shares + map[i] + ",";
        }
        return shares;
    }
    
    // Share
    function shareme() {
        if(jiff_instance == null || !jiff_instance.ready) { alert("Please wait!"); return; }
        
        number = parseInt($('#m').val());
        jiff_instance.share(number).then(
            function(shares) {
                $("#received_shares").append("<li>" + toString(shares) + "</li>");
            }, 
            function() {
                $("#received_shares").append("<li>" + toString(shares) + "</li>");
            }
        );
    }
    </script>
    
    <form action="" onsubmit="return false;">
      <input id="m" autocomplete="off" /> <input type="submit" onClick="shareme();" value="Share" />
    </form>
  </body>
</html>
